

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Deploying a smart contract &mdash; Ansible Collection  documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../contents.html" class="icon icon-home"> Ansible Collection
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../modules/ibmi_at.html">ibmi_at – Schedule a batch job on a remote IBMi node</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/ibmi_copy.html">ibmi_copy – Copy a save file from local to a remote IBMi node</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/ibmi_device_vary.html">ibmi_device_vary – vary on or off target device on a remote IBMi node</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/ibmi_display_subsystem.html">ibmi_display_subsystem – display all currently active subsystems or currently active jobs in a subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/ibmi_end_subsystem.html">ibmi_end_subsystem – end a subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/ibmi_fetch.html">ibmi_fetch – Fetch objects or a library from a remote IBMi node and store on local</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/ibmi_fix.html">ibmi_fix – Install, remove or query an individual fix or a set of fixes on to IBM i system.</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/ibmi_fix_imgclg.html">ibmi_fix_imgclg – Install fixes such as PTF, PTF Group, Technology refresh to the target IBM i system by image catalog.</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/ibmi_host_server_service.html">ibmi_host_server_service – Manage host server on a remote IBMi node</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/ibmi_iasp.html">ibmi_iasp – Control IASP on target IBMi node</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/ibmi_job.html">ibmi_job – Returns job information according to inputs.</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/ibmi_lib_restore.html">ibmi_lib_restore – Restore one library on a remote IBMi node</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/ibmi_lib_save.html">ibmi_lib_save – Save one libary on a remote IBMi node</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/ibmi_message.html">ibmi_message – Search or reply message on a remote IBMi node</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/ibmi_object_authority.html">ibmi_object_authority – Grant, Revoke or Display Object Authority</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/ibmi_object_find.html">ibmi_object_find – Find specific IBM i object(s).</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/ibmi_object_restore.html">ibmi_object_restore – Restore one or more objects on a remote IBMi node</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/ibmi_object_save.html">ibmi_object_save – Save one or more objects on a remote IBMi node</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/ibmi_reboot.html">ibmi_reboot – Reboot a machine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/ibmi_save_product_to_savf.html">ibmi_save_product_to_savf – Save the the licensed program(product) to a save file</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/ibmi_script.html">ibmi_script – Execute a local cl/sql script file on a remote ibm i node.</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/ibmi_script_execute.html">ibmi_script_execute – Execute a cl/sql script file on a remote ibm i node.</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/ibmi_sql_execute.html">ibmi_sql_execute – Executes a SQL non-DQL(Data Query Language) statement on a remote IBMi node</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/ibmi_sql_query.html">ibmi_sql_query – Executes a SQL DQL(Data Query Language) statement on a remote IBMi node.</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/ibmi_start_subsystem.html">ibmi_start_subsystem – start a subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/ibmi_submit_job.html">ibmi_submit_job – Submit a job on IBM i system. This module functions like SBMJOB.</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/ibmi_sync.html">ibmi_sync – Synchronize a save file from current ibm i node A to another ibm i node B.</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/ibmi_synchronize.html">ibmi_synchronize – Synchronize a save file from ibm i node A to another ibm i node B.</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/ibmi_tcp_interface.html">ibmi_tcp_interface – Add, change, remove or query a tcp/ip interface.</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/ibmi_tcp_server_service.html">ibmi_tcp_server_service – Manage tcp server on a remote IBMi node</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/ibmi_uninstall_product.html">ibmi_uninstall_product – delete the objects that make up the licensed program(product)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/ibmi_user_and_group.html">ibmi_user_and_group – Create, Change or Display a user(or group) profile</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../contents.html">Ansible Collection</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../contents.html">Docs</a> &raquo;</li>
        
      <li>Deploying a smart contract</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/LiJunBJZhu/i_collection_core/blob/master/docs/source/tutorials/deploying.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="deploying-a-smart-contract">
<h1>Deploying a smart contract<a class="headerlink" href="#deploying-a-smart-contract" title="Permalink to this headline">¶</a></h1>
<p>This tutorial will demonstrate how to use the IBM Blockchain Platform collection for Ansible to automate the process of deploying a smart contract to an existing Hyperledger Fabric network.</p>
<p>In this tutorial, you will use the IBM Blockchain Platform collection for Ansible to deploy the FabCar sample smart contract to an existing Hyperledger Fabric network. The existing Hyperledger Fabric network has three organizations - an ordering organization “Ordering Org”, and two endorsing organizations “Org1” and “Org2”. Both organizations are members of an existing channel called “mychannel”. You will install the FabCar sample smart contract onto the peers for both “Org1” and “Org2”, and then instantiate the smart contract on the channel “mychannel”.</p>
<p>For this tutorial, you can use the IBM Blockchain Platform on IBM Cloud, or the IBM Blockchain Platform software running in a Red Hat OpenShift or Kubernetes cluster.</p>
<div class="section" id="before-you-start">
<h2>Before you start<a class="headerlink" href="#before-you-start" title="Permalink to this headline">¶</a></h2>
<p>This tutorial builds upon the Hyperledger Fabric that is created as part of the <a class="reference external" href="./building.html">Building a network</a> and the <a class="reference external" href="./joining.html">Joining a network</a> tutorials. Ensure that you have followed these tutorials, and that you have the network up and running.</p>
<p>You will need to use the GitHub repository that you cloned in the previous tutorial. Ensure that you are in the tutorials directory:</p>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cd ansible-collection/tutorials
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="deploying-the-smart-contract">
<h2>Deploying the smart contract<a class="headerlink" href="#deploying-the-smart-contract" title="Permalink to this headline">¶</a></h2>
<p>There are multiple Ansible playbooks used in this tutorial. Each Ansible playbook performs a part of the set of tasks required to deploy the smart contract. Each of the Ansible playbooks is run as one of the endorsing organizations “Org1” or “Org2”.</p>
<p>The contents of these playbooks are explored at the end of this tutorial. For now, a script <a class="reference external" href="https://github.com/IBM-Blockchain/ansible-collection/blob/master/tutorial/deploy_smart_contract.sh">deploy_smart_contract.sh</a> has been provided which runs these Ansible playbooks in order for you.</p>
<p>If you have installed the collection using Ansible Galaxy, or from source, then run the script as follows:</p>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>./deploy_smart_contract.sh
</pre></div>
</div>
</div></blockquote>
<p>If you have installed the collection by building a Docker image, then run the script as follows:</p>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>docker run --rm -v &quot;$PWD:/tutorials&quot; mydockerorg/ansible /tutorials/deploy_smart_contract.sh
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="exploring-the-playbooks">
<h2>Exploring the playbooks<a class="headerlink" href="#exploring-the-playbooks" title="Permalink to this headline">¶</a></h2>
<p>When you ran the script <cite>join_network.sh</cite>, you ran multiple Ansible playbooks. Each Ansible playbook performed a different part of joining the network. This section will explain which organization ran each Ansible playbook, and what each of the playbooks did.</p>
<p>Here are the Ansible playbooks that were executed by the script above:</p>
<ul>
<li><p class="first"><a class="reference external" href="https://github.com/IBM-Blockchain/ansible-collection/blob/master/tutorial/18-install-chaincode.yml">18-install-chaincode.yml</a></p>
<div class="line-block">
<div class="line">Organization: Org1</div>
<div class="line">Command:</div>
</div>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ansible-playbook 18-install-chaincode.yml --extra-vars &quot;@org1-vars.yml&quot;
</pre></div>
</div>
</div></blockquote>
<div class="line-block">
<div class="line">This playbook uses the Ansible module <a class="reference external" href="../modules/installed_chaincode.html">installed_chaincode</a> to install the FabCar smart contract onto the peer <cite>Org1 Peer</cite>.</div>
</div>
</li>
<li><p class="first"><a class="reference external" href="https://github.com/IBM-Blockchain/ansible-collection/blob/master/tutorial/19-install-chaincode.yml">19-install-chaincode.yml</a></p>
<div class="line-block">
<div class="line">Organization: Org2</div>
<div class="line">Command:</div>
</div>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ansible-playbook 19-install-chaincode.yml --extra-vars &quot;@org2-vars.yml&quot;
</pre></div>
</div>
</div></blockquote>
<div class="line-block">
<div class="line">This playbook uses the Ansible module <a class="reference external" href="../modules/installed_chaincode.html">installed_chaincode</a> to install the FabCar smart contract onto the peer <cite>Org2 Peer</cite>.</div>
</div>
</li>
<li><p class="first"><a class="reference external" href="https://github.com/IBM-Blockchain/ansible-collection/blob/master/tutorial/20-instantiate-chaincode.yml">20-instantiate-chaincode.yml</a></p>
<div class="line-block">
<div class="line">Organization: Org1</div>
<div class="line">Command:</div>
</div>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ansible-playbook 20-instantiate-chaincode.yml --extra-vars &quot;@org1-vars.yml&quot;
</pre></div>
</div>
</div></blockquote>
<div class="line-block">
<div class="line">This playbook uses the Ansible module <a class="reference external" href="../modules/instantiated_chaincode.html">instantiated_chaincode</a> to instantiate the FabCar smart contract on the channel <cite>mychannel</cite>.</div>
</div>
</li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Simon Stone

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>